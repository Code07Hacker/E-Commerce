{"ast":null,"code":"import axios from \"axios\";\nimport { API_BASE_URL } from \"../../config/apiConfig\";\nimport { GET_USER_FAILURE, GET_USER_REQUEST, GET_USER_SUCCESS, LOGIN_FAILURE, LOGIN_REQUEST, LOGOUT, REGISTER_FAILURE, REGISTER_REQUEST, REGISTER_SUCCESS } from \"./ActionType\";\nconst token = localStorage.getItem(\"jwt\");\nconst registerRequest = () => ({\n  type: REGISTER_REQUEST\n});\nconst registerSuccess = user => ({\n  type: REGISTER_SUCCESS,\n  payload: user\n});\nconst registerFailure = error => ({\n  type: REGISTER_FAILURE,\n  payload: error\n});\nexport const register = userData => async dispatch => {\n  dispatch(registerRequest());\n  try {\n    const response = await axios.post(`${API_BASE_URL}/auth/signup`, userData);\n    const user = response.data;\n    if (user.jwt) {\n      localStorage.setItem(\"jwt\", user.jwt);\n    }\n    console.log(user);\n    dispatch(registerSuccess(user.jwt));\n  } catch (error) {\n    dispatch(registerFailure(error.message));\n  }\n};\nconst loginRequest = () => ({\n  type: LOGIN_REQUEST\n});\nconst loginSuccess = () => ({\n  type: LOGIN_REQUEST,\n  payload: user\n});\nconst loginFailure = () => ({\n  type: LOGIN_FAILURE,\n  payload: error\n});\nexport const login = userData => async dispatch => {\n  dispatch(loginRequest());\n  try {\n    const response = await axios.post(`${API_BASE_URL}/auth/signin`, userData);\n    const user = response.data;\n    if (user.jwt) {\n      localStorage.setItem(\"jwt\", user.jwt);\n    }\n    console.log(user);\n    dispatch(loginSuccess(user.jwt));\n  } catch (error) {\n    dispatch(loginFailure(error.message));\n  }\n};\nconst getUserRequest = () => ({\n  type: GET_USER_REQUEST\n});\nconst getUserSuccess = () => ({\n  type: GET_USER_SUCCESS,\n  payload: user\n});\nconst getUserFailure = () => ({\n  type: GET_USER_FAILURE,\n  payload: error\n});\nexport const getUser = () => async dispatch => {\n  dispatch(getUserRequest());\n  try {\n    const response = await axios.get(`${API_BASE_URL}/api/users/profile`, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    const user = response.data;\n    console.log(user);\n    dispatch(getUserSuccess(user));\n  } catch (error) {\n    dispatch(getUserFailure(error.message));\n  }\n};\nexport const logout = () => dispatch => {\n  dispatch({\n    type: LOGOUT,\n    payload: null\n  });\n};","map":{"version":3,"names":["axios","API_BASE_URL","GET_USER_FAILURE","GET_USER_REQUEST","GET_USER_SUCCESS","LOGIN_FAILURE","LOGIN_REQUEST","LOGOUT","REGISTER_FAILURE","REGISTER_REQUEST","REGISTER_SUCCESS","token","localStorage","getItem","registerRequest","type","registerSuccess","user","payload","registerFailure","error","register","userData","dispatch","response","post","data","jwt","setItem","console","log","message","loginRequest","loginSuccess","loginFailure","login","getUserRequest","getUserSuccess","getUserFailure","getUser","get","headers","logout"],"sources":["/home/ankit/Desktop/ecommerce/src/state/Auth/Action.js"],"sourcesContent":["import axios from \"axios\"\nimport { API_BASE_URL } from \"../../config/apiConfig\"\nimport { GET_USER_FAILURE, GET_USER_REQUEST, GET_USER_SUCCESS, LOGIN_FAILURE, LOGIN_REQUEST, LOGOUT, REGISTER_FAILURE, REGISTER_REQUEST, REGISTER_SUCCESS } from \"./ActionType\"\n\n\nconst token=localStorage.getItem(\"jwt\");\nconst registerRequest = () => ({\n    type:REGISTER_REQUEST\n});\nconst registerSuccess = (user) => ({\n    type:REGISTER_SUCCESS,\n    payload:user\n});\nconst registerFailure = (error) => ({\n    type:REGISTER_FAILURE,\n    payload:error\n});\n\n\n\nexport const register = (userData) => async (dispatch) => {\n    \n    dispatch(registerRequest());\n\n    \n    try {\n        const response = await axios.post(`${API_BASE_URL}/auth/signup`,userData)\n        const user = response.data;\n        if(user.jwt){\n            localStorage.setItem(\"jwt\",user.jwt);\n        }\n        console.log(user);\n        dispatch(registerSuccess(user.jwt))\n    } catch (error) {\n        dispatch(registerFailure(error.message))\n    }\n}\n\n\nconst loginRequest = () => ({\n    type:LOGIN_REQUEST\n});\nconst loginSuccess = () => ({\n    type:LOGIN_REQUEST,\n    payload:user\n});\nconst loginFailure = () => ({\n    type:LOGIN_FAILURE,\n    payload:error\n});\n\nexport const login = (userData) => async (dispatch) => {\n    \n    dispatch(loginRequest());\n\n    \n    try {\n        const response = await axios.post(`${API_BASE_URL}/auth/signin`,userData)\n        const user = response.data;\n        if(user.jwt){\n            localStorage.setItem(\"jwt\",user.jwt);\n        }\n        console.log(user);\n        dispatch(loginSuccess(user.jwt))\n    } catch (error) {\n        dispatch(loginFailure(error.message))\n    }\n}\n\nconst getUserRequest = () => ({\n    type:GET_USER_REQUEST\n});\nconst getUserSuccess = () => ({\n    type:GET_USER_SUCCESS,\n    payload:user\n});\nconst getUserFailure = () => ({\n    type:GET_USER_FAILURE,\n    payload:error\n});\n\nexport const getUser = () => async (dispatch) => {\n    \n    dispatch(getUserRequest());\n\n    \n    try {\n        const response = await axios.get(`${API_BASE_URL}/api/users/profile`,{\n        headers:{\n            \"Authorization\":`Bearer ${token}`\n        }\n        })\n        const user = response.data;\n        console.log(user);\n        dispatch(getUserSuccess(user))\n    } catch (error) {\n        dispatch(getUserFailure(error.message))\n    }\n}\n\n\nexport const logout = ()=>(dispatch) => {\n    dispatch({type:LOGOUT,payload:null})\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}